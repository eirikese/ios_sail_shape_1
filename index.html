<!DOCTYPE html>
<html>
<head>
    <title>Video Stream</title>
</head>
<body>
    <h1>Phone Camera Stream</h1>
    <video id="video" autoplay playsinline></video>
    <script>
        const video = document.getElementById('video');

        // Access the device camera
        navigator.mediaDevices.getUserMedia({ video: true })
            .then((stream) => {
                video.srcObject = stream;

                const mediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'video/webm; codecs=vp8',
                });

                mediaRecorder.ondataavailable = (event) => {
                    if (event.data.size > 0) {
                        // Send video data to the server
                        fetch('http://192.168.10.167:5000/video_feed', {

                            method: 'POST',
                            body: event.data,
                        }).catch(console.error);
                    }
                };

                mediaRecorder.start(100); // Send frames every 100ms
            })
            .catch((err) => {
                console.error('Camera access denied:', err);
            });
    </script>
</body>
</html>
